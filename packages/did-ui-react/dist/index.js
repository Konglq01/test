import{jsxs as v,jsx as r,Fragment as j}from"react/jsx-runtime";import{useState as N,useMemo as B,useCallback as A,useEffect as G,memo as W,forwardRef as tr,useImperativeHandle as ar,useRef as le}from"react";import Se from"aelf-sdk";import{useEffectOnce as $,useUpdateEffect as de,usePrevious as or}from"react-use";import sr from"@portkey/hooks/useInterval";import{contractQueries as cr}from"@portkey/graphql/index";import{LoginType as V,DeviceType as _}from"@portkey/types/types-ca/wallet";import{VerificationType as Y,VerifyStatus as D}from"@portkey/types/verifier";import{handlePrivateKey as ke,isWalletError as lr}from"@portkey/store/wallet/utils";import{isPrivateKey as be,randomId as ve,isExtension as dr}from"@portkey/utils";import{getAccountByPrivateKey as Be,formatWalletInfo as gr}from"@portkey/utils/wallet";import pr from"qrcode.react";import{Row as Te,Col as H,Input as Qe,Form as re,Button as Q,message as Fe,ConfigProvider as ur,Modal as xe,Image as hr,Select as fr,Tooltip as mr}from"antd";import x from"clsx";import{isValidPassword as vr}from"@portkey/utils/reg";import{PinErrorMessage as ee}from"@portkey/utils/wallet/types";import{useTranslation as q}from"react-i18next";import{WalletError as Ce}from"@portkey/store/wallet/type";import{NetworkList as Ae,DefaultChainId as ie}from"@portkey/constants/constants-ca/network";import Cr from"events";import{Verification as Ue}from"@portkey/api/api-did/verification/utils";import{LeftOutlined as Ar}from"@ant-design/icons";import{LoginStrType as Z,GUARDIAN_TYPE_TYPE as yr}from"@portkey/constants/constants-ca/guardian";import{registerDIDWallet as Lr,recoveryDIDWallet as wr}from"@portkey/api/api-did/utils/wallet";import{getWalletCAAddressByApi as Er}from"@portkey/hooks/hooks-ca/wallet-result";import{getApprovalCount as Ir}from"@portkey/utils/guardian";import{checkEmail as Nr,EmailError as ye}from"@portkey/utils/check";import{SandboxEventService as Me,SandboxEventTypes as Pe,SandboxErrorCode as Re}from"@portkey/utils/sandboxService";import{getELFContract as Le}from"@portkey/utils/aelf";import{PasscodeInput as Sr}from"antd-mobile";import{DIGIT_CODE as te}from"@portkey/constants/misc";import{checkVerificationCode as kr}from"@portkey/api/api-did/utils/verification";import{request as br}from"@portkey/api/api-did";function Br({uri:e,address:i,chainId:n}){const[t,a]=N(),o=B(()=>i&&t?t:void 0,[t,i]);return sr(async()=>{if(console.log(i,o,e,n,"caWallet==="),!(!i||o||!e||!n))try{const{caHolderManagerInfo:s}=await cr.getCAHolderByManagerByUrl(e,{chainId:n,manager:i}),{caAddress:p,caHash:c,loginGuardianAccountInfo:l}=s[0];p&&c&&l[0]&&a({managerInfo:{managerUniqueId:l[0].id,loginAccount:l[0].loginGuardianAccount,type:V.email,verificationType:Y.addManager},[n]:{caAddress:p,caHash:c}})}catch(s){console.log(s,"=====error")}},3e3,[o,e,i]),o}function Tr({qrData:e,backIcon:i,isShowIcon:n=!0,onBack:t}){return v("div",{className:"scan-card-wrapper",children:[v("h2",{className:"scan-title",children:["Scan code to log in",n&&i&&r("div",{className:"back-icon-wrapper",onClick:t,children:i})]}),r("p",{children:"Please use the portkey Dapp to scan the QR code"}),r("div",{className:"scan-content",children:e&&r(pr,{className:"qrc",value:e,style:{width:170,height:170}})})]})}var Qr={Aelf:`<?xml version="1.0" encoding="UTF-8"?>
<svg   viewBox="0 0 20 20" version="1.1" >
    <title>Aelf</title>
    <g id="Icon" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="Special" transform="translate(-153.000000, -78.000000)" fill-rule="nonzero">
            <g id="Aelf" transform="translate(153.000000, 78.000000)">
                <circle id="Circle" fill="#266CD3" cx="10" cy="10" r="10"></circle>
                <path d="M10.4130007,13.540636 C11.0921353,13.540636 11.6426827,14.0911834 11.6426827,14.770318 C11.6426827,15.4494526 11.0921353,16 10.4130007,16 C9.7338661,16 9.1833187,15.4494526 9.1833187,14.770318 C9.1833187,14.0911834 9.7338661,13.540636 10.4130007,13.540636 Z M10.7734248,11.0176678 C10.9218346,11.3992933 10.7098205,11.8445229 10.328195,11.9717315 C10.1828139,12.0262494 10.0374328,12.0340376 9.8920517,11.9950962 L9.8193611,11.9717315 C9.4801385,11.8657244 9.09851305,11.8657244 8.73808905,11.9929328 C8.2433894,12.1710248 7.89644005,12.5522732 7.73171605,12.9987781 L7.6992198,13.0954063 L7.67801835,13.1378092 C7.67801835,13.1590106 7.67801835,13.180212 7.65681695,13.180212 L7.65681695,13.2226148 C7.50840705,13.8162544 7.1055802,14.3250883 6.4907392,14.5371024 C5.5366756,14.9187279 4.47660493,14.4310954 4.11618091,13.4558304 C3.75575688,12.5017668 4.2645908,11.4204947 5.2186544,11.0600707 C5.81728255,10.8405737 6.4534717,10.940345 6.93278845,11.2886817 L7.02077455,11.3568904 C7.46600425,11.6749116 8.0384424,11.7809187 8.58967915,11.5689046 C8.91005605,11.4558304 9.16342605,11.2589975 9.3497891,11.0081868 L9.41653425,10.9116608 L9.4377357,10.8692579 C9.52254135,10.7420494 9.6497498,10.614841 9.8193611,10.5724381 C10.2009865,10.4240282 10.6462162,10.6360424 10.7734248,11.0176678 Z M13.4660042,7.4982332 C14.8476919,7.4982332 15.967771,8.61831235 15.967771,10 C15.967771,11.3816876 14.8476919,12.5017668 13.4660042,12.5017668 C12.0843166,12.5017668 10.9642374,11.3816876 10.9642374,10 C10.9642374,8.61831235 12.0843166,7.4982332 13.4660042,7.4982332 Z M4.11618091,6.5441696 C4.45540352,5.5689046 5.5366756,5.0812721 6.4907392,5.46289755 C7.1055802,5.67491165 7.50840705,6.1837456 7.65681695,6.77738515 L7.65681695,6.77738515 L7.65681695,6.819788 C7.67801835,6.819788 7.67801835,6.8409894 7.67801835,6.8621908 L7.67801835,6.8621908 L7.6992198,6.90459365 L7.73171605,7.00122185 C7.89644005,7.44772675 8.2433894,7.82897525 8.73808905,8.00706715 C9.09851305,8.1342756 9.4801385,8.1342756 9.8193611,8.02826855 L9.8193611,8.02826855 L9.8920517,8.00490375 C10.0374328,7.96596235 10.1828139,7.97375065 10.328195,8.02826855 C10.7098205,8.15547705 10.9218346,8.6007067 10.7734248,8.98233215 C10.6462162,9.3639576 10.2009865,9.57597175 9.8193611,9.42756185 C9.6497498,9.385159 9.52254135,9.25795055 9.4377357,9.13074205 L9.4377357,9.13074205 L9.41653425,9.0883392 L9.3497891,8.99181315 C9.16342605,8.7410025 8.91005605,8.5441696 8.58967915,8.4310954 C8.0384424,8.21908125 7.46600425,8.32508835 7.02077455,8.64310955 L7.02077455,8.64310955 L6.93278845,8.7113183 C6.4534717,9.05965495 5.81728255,9.1594263 5.2186544,8.93992935 C4.2645908,8.5795053 3.75575688,7.4982332 4.11618091,6.5441696 Z M10.4130007,4 C11.0921353,4 11.6426827,4.55054737 11.6426827,5.229682 C11.6426827,5.9088166 11.0921353,6.45936395 10.4130007,6.45936395 C9.7338661,6.45936395 9.1833187,5.9088166 9.1833187,5.229682 C9.1833187,4.55054737 9.7338661,4 10.4130007,4 Z" id="Shape" fill="#FFFFFF"></path>
            </g>
        </g>
    </g>
</svg>`,BackLeft:`
<svg   viewBox="0 0 12 12" version="1.1" >
    <g id="mxklhfsglt" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="eofqjcyjkh" transform="translate(-230.000000, -72.000000)">
            <g id="stubogoidu" transform="translate(230.000000, 68.000000)">
                <g id="oogxwhdmgd" transform="translate(0.000000, 4.000000)">
                    <g id="wqwdhsurnh">
                        <rect id="qjynioqwkz" x="0" y="0" width="12" height="12"></rect>
                    </g>
                    <path
                        d="M11.1398205,3 L10.1036191,3 C10.0331574,3 9.96684055,3.02929687 9.92539249,3.07734375 L6.0002618,7.66640625 L2.0751311,3.07734375 C2.03368305,3.02929687 1.96736616,3 1.89690447,3 L0.860703128,3 C0.770899012,3 0.718398144,3.08671875 0.770899012,3.14882812 L5.64242693,8.8453125 C5.81927196,9.0515625 6.18125163,9.0515625 6.35671506,8.8453125 L11.228243,3.14882812 C11.2821255,3.08671875 11.2296246,3 11.1398205,3 Z"
                        id="yiiubvmuil" fill="#515A62"
                        transform="translate(6.000000, 6.000000) rotate(90.000000) translate(-6.000000, -6.000000) ">
                    </path>
                </g>
            </g>
        </g>
    </g>
</svg>`,"Down-primary":`
<svg   viewBox="0 0 12 12" version="1.1" >
    
    <g id="nuzntpzzsz" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="xsutmidvsx" transform="translate(-248.000000, -30.000000)">
            <g id="ovheutgxvi" transform="translate(106.000000, 14.000000)">
                <g id="dfdubvepre" transform="translate(142.000000, 16.000000)">
                    <g id="ctnvtudsps">
                        <rect id="jzkovckqoh" x="0" y="0" width="12" height="12"></rect>
                    </g>
                    <path d="M11.1398205,3 L10.1036191,3 C10.0331574,3 9.96684055,3.02929688 9.92539249,3.07734375 L6.0002618,7.66640625 L2.0751311,3.07734375 C2.03368305,3.02929688 1.96736616,3 1.89690447,3 L0.860703128,3 C0.770899012,3 0.718398144,3.08671875 0.770899012,3.14882813 L5.64242693,8.8453125 C5.81927196,9.0515625 6.18125163,9.0515625 6.35671506,8.8453125 L11.228243,3.14882812 C11.2821255,3.08671875 11.2296246,3 11.1398205,3 Z" id="dnntrjvhvg" fill="#5b8ef4"></path>
                </g>
            </g>
        </g>
    </g>
</svg>`,Down:`
<svg   viewBox="0 0 12 12" version="1.1" >
    
    <g id="nuzntpzzsz" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="xsutmidvsx" transform="translate(-248.000000, -30.000000)">
            <g id="ovheutgxvi" transform="translate(106.000000, 14.000000)">
                <g id="dfdubvepre" transform="translate(142.000000, 16.000000)">
                    <g id="ctnvtudsps">
                        <rect id="jzkovckqoh" x="0" y="0" width="12" height="12"></rect>
                    </g>
                    <path d="M11.1398205,3 L10.1036191,3 C10.0331574,3 9.96684055,3.02929688 9.92539249,3.07734375 L6.0002618,7.66640625 L2.0751311,3.07734375 C2.03368305,3.02929688 1.96736616,3 1.89690447,3 L0.860703128,3 C0.770899012,3 0.718398144,3.08671875 0.770899012,3.14882813 L5.64242693,8.8453125 C5.81927196,9.0515625 6.18125163,9.0515625 6.35671506,8.8453125 L11.228243,3.14882812 C11.2821255,3.08671875 11.2296246,3 11.1398205,3 Z" id="dnntrjvhvg" fill="#515A62"></path>
                </g>
            </g>
        </g>
    </g>
</svg>`,Email:`<?xml version="1.0" encoding="UTF-8"?>
<svg   viewBox="0 0 40 40" version="1.1" >
    <title>Icon___Special___Email</title>
    <g id="Icon" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="Special" transform="translate(-39.000000, -80.000000)">
            <g id="Icon___Special___Email" transform="translate(39.009189, 80.005169)">
                <path d="M0,19.9649677 C0,30.9921034 8.93840633,39.9316583 19.9649677,39.9316583 C30.9915291,39.9316583 39.931084,30.9926777 39.931084,19.965542 C39.931084,8.93898065 30.9921034,0 19.9649677,0 C8.93898061,-0.000574277638 0,8.93840633 0,19.9649677 Z" id="Shape" fill="#E7F0FC"></path>
                <path d="M21.3991632,21.3174756 L29.797479,14.3410374 L29.797479,25.8169765 C29.7849486,26.6813202 29.0743255,27.3719737 28.2099758,27.3598685 L12.3414733,27.3598685 C11.9266345,27.3655341 11.5265397,27.2061537 11.2292249,26.9167972 C10.93191,26.6274407 10.7617356,26.2318164 10.7561464,25.8169765 L10.7561464,14.3410374 L19.1550061,21.3174756 C19.7817126,21.9192187 20.7719126,21.9192187 21.3991632,21.3174756 Z" id="Shape" fill="#5B8EF4" fill-rule="nonzero"></path>
                <path d="M20.8573013,20.0629347 C20.5255086,20.3814949 20.0014588,20.3814949 19.6696662,20.0629347 L11.466116,13.2758217 C11.7276506,13.1051208 12.0335162,13.0148933 12.3458256,13.016267 L28.212152,13.016267 C28.5136534,13.018905 28.8085446,13.104962 29.0641156,13.264941 L29.0706441,13.264941 L20.8573013,20.0629347 Z" id="Shape" fill="#5B8EF4" fill-rule="nonzero" opacity="0.400000006"></path>
            </g>
        </g>
    </g>
</svg>`,EyeInvisibleOutlined:`
<svg   viewBox="0 0 16 16" version="1.1" >
    
    <g id="ewyycwenxn" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="izwgspsgdh" transform="translate(-848.000000, -440.000000)">
            <g id="cpxxmyonqb" transform="translate(320.000000, 424.000000)">
                <g id="ombzsvyqws" transform="translate(528.000000, 16.000000)">
                    <rect id="cwyxqwthor" x="0" y="0" width="16" height="16"></rect>
                    <path d="M15.8956366,7.91635199 L15.8938017,7.91451705 L15.8919667,7.91268211 C15.2240481,6.50528224 14.4240138,5.36761871 13.4936986,4.49969154 L12.5633834,5.43184165 C13.3652527,6.169488 14.0588605,7.15118153 14.6570513,8.38426199 C13.1285453,11.5458656 10.9614798,13.0468475 7.99988475,13.0468475 C7.05855994,13.0468475 6.19613759,12.8945474 5.40894783,12.5862773 L4.40523501,13.5899901 C5.47867559,14.1074435 6.67505723,14.3680051 7.99988475,14.3680051 C11.5266417,14.3680051 14.1542774,12.5238893 15.8938017,8.85767681 C16.0350921,8.56041634 16.0350921,8.2154474 15.8956366,7.91635199 L15.8956366,7.91635199 Z M14.7212742,1.82067744 L13.9432592,1.04266238 C13.886376,0.985779206 13.792794,0.985779206 13.7359108,1.04266238 L11.5926996,3.18403872 C10.5210939,2.66475037 9.32471228,2.40418873 7.99988475,2.40418873 C4.47312783,2.40418873 1.84549208,4.2483046 0.105967852,7.91451705 L0.105967852,7.91635199 C-0.0353226175,8.21361246 -0.0353226175,8.56225129 0.105967852,8.8613467 C0.773886437,10.2687466 1.57392079,11.4064101 2.50423596,12.2761722 L0.656450203,14.1202881 C0.599567026,14.1771713 0.599567026,14.2707533 0.656450203,14.3276364 L1.43446526,15.1056515 C1.49134843,15.1625347 1.58493043,15.1625347 1.64181361,15.1056515 L14.7212742,2.02619085 C14.7781574,1.97114261 14.7781574,1.87756061 14.7212742,1.82067744 Z M5.92456629,8.85217199 C5.88970241,8.70170681 5.871353,8.54573682 5.871353,8.38609693 C5.871353,7.25026835 6.79065852,6.33096283 7.92648711,6.33096283 C8.08612699,6.33096283 8.24393193,6.34931224 8.39256216,6.38417612 L5.92456629,8.85217199 Z M9.31003275,5.46670554 C8.88983122,5.26853189 8.42192122,5.15660048 7.92648711,5.15660048 C6.14292429,5.15660048 4.69699065,6.60253412 4.69699065,8.38609693 C4.69699065,8.88153105 4.80892206,9.34944105 5.00709571,9.76964257 L3.43638607,11.3403522 C2.63451678,10.6027059 1.94090902,9.62101234 1.3427182,8.38793187 C2.87305913,5.22632824 5.04012465,3.72534637 7.99988475,3.72534637 C8.94120957,3.72534637 9.80363192,3.87764649 10.5908217,4.1859166 L9.31003275,5.46670554 L9.31003275,5.46670554 Z M7.92648711,10.441231 C7.80905087,10.441231 7.69344958,10.4320563 7.58151817,10.411872 L6.64386323,11.3495269 C7.03654064,11.5201764 7.4714217,11.6137584 7.92648711,11.6137584 C9.71004992,11.6137584 11.1559836,10.1678248 11.1559836,8.38426199 C11.1559836,7.92919658 11.0624016,7.49431553 10.891752,7.10163812 L9.9540971,8.03929305 C9.97244651,8.15122446 9.98345616,8.26682576 9.98345616,8.38426199 C9.98162121,9.52192552 9.06231569,10.441231 7.92648711,10.441231 Z" id="rchgrlefmr" fill="#464B53"></path>
                </g>
            </g>
        </g>
    </g>
</svg>`,EyeOutlined:`
<svg   viewBox="0 0 16 16" version="1.1" >
    
    <g id="tlxvwosmzz" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="rernsumtqb" transform="translate(-848.000000, -338.000000)">
            <g id="bkjfpztors" transform="translate(320.000000, 322.000000)">
                <g id="lthtgqbnyc" transform="translate(528.000000, 16.000000)">
                    <g id="kurtietvnz">
                        <rect id="qzxosqyqdh" x="0" y="0" width="16" height="16"></rect>
                    </g>
                    <g id="gpwodjgikj" transform="translate(0.000000, 2.000000)" fill="#464B53">
                        <path d="M10.6305251,4.4348758 C10.0797422,3.48888818 9.06043603,2.90949312 7.96244662,2.92379917 C6.29579168,2.94525824 4.95638766,4.30075657 4.95638766,5.96741151 C4.95638766,7.63406645 6.29579168,8.98956478 7.96244662,9.01102385 C9.06043603,9.02354165 10.0797422,8.44593484 10.6305251,7.49994722 C11.1813081,6.5539596 11.1813081,5.38086342 10.6305251,4.4348758 L10.6305251,4.4348758 Z M8.02682385,7.63406645 C7.42775796,7.64479599 6.8644572,7.32827461 6.56045362,6.80789201 C6.25645004,6.28929766 6.25645004,5.64373711 6.56045362,5.12514276 C6.8644572,4.60654841 7.42418145,4.28823878 8.02682385,4.29896832 C8.93525808,4.31506262 9.66665494,5.05718902 9.66665494,5.96562325 C9.66665494,6.87942226 8.93525808,7.61797214 8.02682385,7.63406645 L8.02682385,7.63406645 Z" id="fxfyuobrmn"></path>
                        <path d="M15.7646092,5.19488476 C13.4273581,1.73103217 10.8397511,1.42108547e-14 8,1.42108547e-14 C5.21389657,1.42108547e-14 2.66920776,1.67023145 0.364145295,5.00711784 L0.235390836,5.19846127 L0.183531402,5.28250932 C-0.079342285,5.74030295 -0.0578832086,6.30360371 0.235390836,6.73993826 C2.57264191,10.2037909 5.16024888,11.934823 8,11.934823 C10.7861034,11.934823 13.3307922,10.2645916 15.6358547,6.92770518 L15.7646092,6.73636175 L15.8164686,6.6523137 C16.0793423,6.19630833 16.0578832,5.63121931 15.7646092,5.19488476 Z M14.4967354,6.15339017 C12.4312993,9.14335483 10.2746621,10.5578656 8,10.5578656 C5.72712615,10.5578656 3.57048897,9.14335483 1.5032646,6.15339017 L1.3762984,5.96741151 L1.5032646,5.78143285 C3.56870071,2.7914682 5.7253379,1.37695741 8,1.37695741 C10.2728738,1.37695741 12.429511,2.7914682 14.4967354,5.78143285 L14.6237016,5.96741151 L14.4967354,6.15339017 L14.4967354,6.15339017 Z" id="qcdhqfyvjm"></path>
                    </g>
                </g>
            </g>
        </g>
    </g>
</svg>`,LeftArrow:`
<svg   viewBox="0 0 16 16" version="1.1" >
    <g id="uwnlplteyh" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="dprrnlrwff" transform="translate(-200.000000, -36.000000)">
            <g id="udhwnwrhcn" transform="translate(200.000000, 20.000000)">
                <g id="hushnwgwqf" transform="translate(0.000000, 14.000000)">
                    <g id="tyizvsggqm" transform="translate(0.000000, 2.000000)">
                        <g id="tyudhjyfzk">
                            <rect id="vyzintloqt" x="0" y="0" width="16" height="16"></rect>
                        </g>
                        <path d="M14.853094,4 L13.4714922,4 C13.3775432,4 13.2891207,4.0390625 13.2338567,4.103125 L8.00034906,10.221875 L2.76684147,4.103125 C2.7115774,4.0390625 2.62315489,4 2.52920596,4 L1.14760417,4 C1.02786535,4 0.957864192,4.115625 1.02786535,4.1984375 L7.52323591,11.79375 C7.75902928,12.06875 8.24166884,12.06875 8.47562008,11.79375 L14.9709906,4.1984375 C15.0428339,4.115625 14.9728328,4 14.853094,4 Z" id="bdmbqtegju" fill="#464B53" transform="translate(8.000000, 8.000000) rotate(90.000000) translate(-8.000000, -8.000000) "></path>
                    </g>
                </g>
            </g>
        </g>
    </g>
</svg>`,PC:`<?xml version="1.0" encoding="UTF-8"?>
<svg   viewBox="0 0 80 80" version="1.1" >
    <title>PC</title>
    <g id="Icon" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="Special" transform="translate(-237.000000, -143.000000)">
            <g id="PC" transform="translate(237.000000, 143.000000)">
                <path d="M0,0 L72,0 C76.418278,-8.11624501e-16 80,3.581722 80,8 L80,80 L80,80 L0,0 Z" id="Shape" fill="#EEF3FD"></path>
                <rect id="Shape" stroke="#979797" fill="#D8D8D8" opacity="0" x="24.5" y="8.5" width="47" height="47"></rect>
                <path d="M57.6451613,44.0967742 C58.446865,44.0967742 59.0967742,44.7466834 59.0967742,45.5483871 C59.0967742,46.3500908 58.446865,47 57.6451613,47 L39.2580645,47 C38.4563608,47 37.8064516,46.3500908 37.8064516,45.5483871 C37.8064516,44.7466834 38.4563608,44.0967742 39.2580645,44.0967742 L57.6451613,44.0967742 Z M61.0322581,17 C63.1701345,17 64.9032258,18.7330913 64.9032258,20.8709677 L64.9032258,37.3225806 C64.9032258,39.4604571 63.1701345,41.1935484 61.0322581,41.1935484 L35.8709677,41.1935484 C33.7330913,41.1935484 32,39.4604571 32,37.3225806 L32,20.8709677 C32,18.7330913 33.7330913,17 35.8709677,17 L61.0322581,17 Z M61.999,36.354 L34.903,36.354 L34.9032258,37.3225806 C34.9032258,37.8188734 35.2768131,38.2279102 35.7581086,38.2838119 L35.8709677,38.2903226 L61.0322581,38.2903226 C61.5285508,38.2903226 61.9375876,37.9167353 61.9934893,37.4354398 L62,37.3225806 L61.999,36.354 Z M61.0322581,19.9032258 L35.8709677,19.9032258 C35.374675,19.9032258 34.9656382,20.2768131 34.9097365,20.7581086 L34.9032258,20.8709677 L34.903,33.451 L61.999,33.451 L62,20.8709677 C62,20.374675 61.6264127,19.9656382 61.1451172,19.9097365 L61.0322581,19.9032258 Z" id="SHape" fill="#5B8EF4"></path>
                <path d="M0,0 L72,0 C76.418278,-8.11624501e-16 80,3.581722 80,8 L80,80 L80,80 L0,0 Z" id="Shape" fill="#FFFFFF" transform="translate(40.000000, 40.000000) scale(-1, -1) translate(-40.000000, -40.000000) "></path>
                <path d="M0,0 L72,0 C76.418278,-8.11624501e-16 80,3.581722 80,8 L80,80 L80,80 L0,0 Z" id="Shape" fill="#FFFFFF" transform="translate(40.000000, 40.000000) scale(-1, -1) translate(-40.000000, -40.000000) "></path>
            </g>
        </g>
    </g>
</svg>`,QRCode:`<?xml version="1.0" encoding="UTF-8"?>
<svg   viewBox="0 0 80 80" version="1.1" >
    <title>OR-code</title>
    <g id="Icon" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="Special" transform="translate(-147.000000, -143.000000)">
            <g id="OR-code" transform="translate(147.000000, 143.000000)">
                <path d="M0,0 L72,0 C76.418278,-8.11624501e-16 80,3.581722 80,8 L80,80 L80,80 L0,0 Z" id="Shape" fill="#EEF3FD"></path>
                <g id="Group" transform="translate(24.000000, 8.000000)">
                    <rect id="Shape" stroke="#979797" fill="#D8D8D8" opacity="0" x="0.5" y="0.5" width="47" height="47"></rect>
                    <path d="M11.2357078,17.2213634 L16.7214156,17.2213634 L16.7214156,11.7356617 L11.2357078,11.7356617 L11.2357078,17.2213634 Z M39.0070461,25.449936 L41.74992,25.449936 L41.74992,34.0213474 L39.0070461,34.0213474 L39.0070461,31.2784766 L36.2641722,31.2784766 L36.2641722,28.1928069 L33.5212983,28.1928069 L33.5212983,25.449936 L36.2641722,25.449936 L36.2641722,28.1928069 L39.0070461,28.1928069 L39.0070461,25.449936 L39.0070461,25.449936 Z M30.7785444,31.2785166 L36.2642522,31.2785166 L36.2642522,36.7642183 L39.0071261,36.7642183 L39.0071261,39.5070891 L41.75,39.5070891 L41.75,42.25 L36.2642922,42.25 L36.2642922,39.5070891 L33.5214183,39.5070891 L33.5214183,34.0213874 L30.7785444,34.0213874 L30.7785444,36.7642583 L27.6928712,36.7642583 L27.6928712,39.5071291 L30.7785444,39.5071291 L30.7785444,42.25 L24.9499973,42.25 L24.9499973,25.450056 L30.7785444,25.450056 L30.7785444,28.1929269 L27.6928712,28.1929269 L27.6928712,34.0214674 L30.7785444,34.0214674 L30.7785444,31.2785966 L30.7785444,31.2785166 Z M5.75,42.24988 L22.2070834,42.24988 L22.2070834,25.449936 L5.75,25.449936 L5.75,42.24988 Z M8.4928739,28.1927669 L19.4642495,28.1927669 L19.4642495,39.5070491 L8.4928739,39.5070491 L8.4928739,28.1927669 L8.4928739,28.1927669 Z M11.2357078,36.7641783 L16.7214156,36.7641783 L16.7214156,31.2784766 L11.2357078,31.2784766 L11.2357078,36.7641783 Z M24.9499573,6.25 L24.9499573,22.7070651 L41.74992,22.7070651 L41.74992,6.25 L24.9499573,6.25 Z M39.0070461,19.9642343 L27.6927512,19.9642343 L27.6927512,8.99287086 L39.0070461,8.99287086 L39.0070461,19.9642343 L39.0070461,19.9642343 Z M5.75,22.7070651 L22.2070834,22.7070651 L22.2070834,6.25 L5.75,6.25 L5.75,22.7070651 Z M8.4928739,8.99287086 L19.4642495,8.99287086 L19.4642495,19.9642343 L8.4928739,19.9642343 L8.4928739,8.99287086 Z M36.2642122,11.7357017 L30.7785044,11.7357017 L30.7785044,17.2214034 L36.2642122,17.2214034 L36.2642122,11.7357017 Z" id="Shape" fill="#5B8EF4"></path>
                </g>
                <path d="M0,0 L72,0 C76.418278,-8.11624501e-16 80,3.581722 80,8 L80,80 L80,80 L0,0 Z" id="Shape" fill="#FFFFFF" transform="translate(40.000000, 40.000000) scale(-1, -1) translate(-40.000000, -40.000000) "></path>
            </g>
        </g>
    </g>
</svg>`,Selected:`
<svg   viewBox="0 0 16 16" version="1.1" >
    <title>wcevolzldy</title>
    <g id="htlgvkelnu" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="ygriocdgrq" transform="translate(-441.000000, -304.000000)">
            <g id="pltowgzkms" transform="translate(425.000000, 284.000000)">
                <g id="wempjlkvcg" transform="translate(0.000000, 4.000000)">
                    <g id="jstzugcgzm" transform="translate(16.000000, 16.000000)">
                        <rect id="udcchimkfy" x="0" y="0" width="16" height="16"></rect>
                        <path d="M14.571619,2 C14.776,2 14.946,2.07417143 15.0825714,2.22261905 C15.2180952,2.37326666 15.2857143,2.561 15.2857143,2.78571428 C15.2857143,3.00613334 15.2174286,3.19166666 15.0797143,3.34231428 L6.50752381,12.7708857 C6.37047619,12.9235238 6.20095238,13 6,13 C5.7992381,13 5.62952381,12.9235238 5.49209523,12.7707809 L1.206,8.0588 C1.06857143,7.90595238 1,7.72041905 1,7.5 C1,7.27518095 1.06742857,7.08744762 1.20380952,6.93690476 C1.33952381,6.78845715 1.50971429,6.71428572 1.71390477,6.71428572 C1.91514286,6.71428572 2.08457144,6.78845715 2.22209523,6.94130476 L6,11.1033905 L14.063619,2.22691428 C14.2011429,2.07427619 14.3707619,2 14.571619,2" id="sytsvrduzv" fill="#2F6EED"></path>
                    </g>
                </g>
            </g>
        </g>
    </g>
</svg>`,Tooltip:`<?xml version="1.0" encoding="UTF-8"?>
<svg   viewBox="0 0 16 16" version="1.1" >
    <title>Question</title>
    <g id="Icon" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="Line" transform="translate(-85.000000, -121.000000)">
            <g id="Question" transform="translate(85.000000, 121.000046)">
                <rect id="Rectangle" x="0" y="0" width="16" height="16"></rect>
                <path d="M8,1 C11.865625,1 15,4.134375 15,8 C15,11.865625 11.865625,15 8,15 C4.134375,15 1,11.865625 1,8 C1,4.134375 4.134375,1 8,1 Z M8,2.1875 C4.790625,2.1875 2.1875,4.790625 2.1875,8 C2.1875,11.209375 4.790625,13.8125 8,13.8125 C11.209375,13.8125 13.8125,11.209375 13.8125,8 C13.8125,4.790625 11.209375,2.1875 8,2.1875 Z M8,10.8125 C8.34517797,10.8125 8.625,11.092322 8.625,11.4375 C8.625,11.782678 8.34517797,12.0625 8,12.0625 C7.65482203,12.0625 7.375,11.782678 7.375,11.4375 C7.375,11.092322 7.65482203,10.8125 8,10.8125 Z M8,4.3125 C8.65625,4.3125 9.275,4.5375 9.74375,4.9484375 C10.23125,5.375 10.5,5.9484375 10.498451,6.5625 C10.498451,7.465625 9.903125,8.278125 8.98125,8.6328125 C8.6921875,8.74375 8.4984375,9.025 8.4984375,9.3328125 L8.4984375,9.3328125 L8.4984375,9.6875 C8.4984375,9.75625 8.4421875,9.8125 8.3734375,9.8125 L8.3734375,9.8125 L7.6234375,9.8125 C7.5546875,9.8125 7.4984375,9.75625 7.4984375,9.6875 L7.4984375,9.6875 L7.4984375,9.3515625 C7.4984375,8.990625 7.6046875,8.634375 7.809375,8.3375 C8.0109375,8.046875 8.2921875,7.825 8.6234375,7.6984375 C9.15625,7.49375 9.5,7.0484375 9.5,6.5625 C9.5,5.8734375 8.8265625,5.3125 8,5.3125 C7.1734375,5.3125 6.5,5.8734375 6.5,6.5625 L6.5,6.5625 L6.5,6.68125 C6.5,6.75 6.44375,6.80625 6.375,6.80625 L6.375,6.80625 L5.625,6.80625 C5.55625,6.80625 5.5,6.75 5.5,6.68125 L5.5,6.68125 L5.5,6.5625 C5.5,5.9484375 5.76875,5.375 6.25625,4.9484375 C6.725,4.5390625 7.34375,4.3125 8,4.3125 Z" id="Shape" fill="#515A62" fill-rule="nonzero"></path>
            </g>
        </g>
    </g>
</svg>`};function R({type:e,className:i,...n}){return r("div",{className:x("custom-svg",`${e.toLocaleLowerCase()}-icon`,i),dangerouslySetInnerHTML:{__html:Qr[e]},...n})}function Fr({title:e,className:i,leftElement:n,rightElement:t,leftCallBack:a}){return v(Te,{justify:"space-between",className:x(i),children:[r(H,{className:"title-left-col",onClick:()=>{typeof n!="boolean"&&a?.()},children:n||(typeof n>"u"?r(R,{style:{cursor:"pointer"},type:"LeftArrow"}):null)}),r(H,{className:"title-center",children:e}),r(H,{className:"title-right-col",children:t||""})]})}function X({title:e,onBack:i,rightElement:n,...t}){const a=B(()=>v("div",{className:"flex-row-center default-left-ele",children:[r(R,{type:"BackLeft",className:"left-arrow"}),r("span",{children:"Back"})]}),[]);return r(Fr,{className:"back-header",title:e,leftCallBack:i,rightElement:n,leftElement:a,...t})}const{Password:xr}=Qe;function we({maxLength:e,placeholder:i,iconRender:n,...t}){const a=A(o=>o?r(R,{style:{cursor:"pointer"},type:"EyeOutlined"}):r(R,{style:{cursor:"pointer"},type:"EyeInvisibleOutlined"}),[]);return r(xr,{...t,maxLength:e??16,placeholder:i??"Must be at least 8 characters",iconRender:n??a})}const{Item:Ee}=re;function Ur({validateFields:e,value:i,onChange:n,isPasswordLengthTipShow:t=!0,label:a}){const{t:o}=q(),[s,p]=N(),[c,l]=N(),[u,d]=N({validateStatus:"validating",errorMsg:""});return G(()=>{c===s?(s&&n?.(s),c&&e?.(["confirmPassword"])):(n?.(""),c&&e?.(["confirmPassword"]))},[c,n,s,e]),v("div",{className:"confirm-password",children:[r(Ee,{label:a?.password?a?.password:r(j,{children:r("span",{style:{marginRight:8},children:o("Pin (Must be at least 8 characters)")})}),name:"password1",validateStatus:u.validateStatus,validateTrigger:"onBlur",help:u.errorMsg||(t?o("Must be at least 8 characters"):void 0),rules:[{required:!0,message:""},()=>({validator(f,m){return m?m.length<8?(d({validateStatus:"error",errorMsg:o(ee.PinNotLong)}),Promise.reject(o(ee.PinNotLong))):vr(m)?(d({validateStatus:"success",errorMsg:""}),Promise.resolve()):(d({validateStatus:"error",errorMsg:o(ee.invalidPin)}),Promise.reject(o(ee.invalidPin))):(d({validateStatus:"error",errorMsg:o("Please enter Pin")}),Promise.reject(o("Please enter Pin")))}})],children:r(we,{placeholder:a?.newPlaceholder||o("Enter Pin"),value:i||s,onChange:f=>p(f.target.value)})}),r(Ee,{label:a?.confirmPassword?a?.confirmPassword:o("Confirm Pin"),name:"confirmPassword",validateTrigger:"onBlur",rules:[{required:!0,message:o("Please enter Pin")},()=>({validator(f,m){return!m||s===m?Promise.resolve():Promise.reject(new Error(o("Pins do not match")))}})],children:r(we,{placeholder:a?.confirmPlaceholder||o("Enter Pin"),value:c,onChange:f=>l(f.target.value)})})]})}const{Item:Ie}=re;function De({className:e,onFinish:i,onFinishFailed:n}){const[t]=re.useForm(),{t:a}=q();return r("div",{className:x("set-pin-wrapper",e),id:"set-pin-wrapper",children:v("div",{className:"set-pin-content",children:[r("div",{className:"set-pin-title",children:a("Enter Pin to Protect Your Wallet")}),v(re,{layout:"vertical",className:"set-pin-form",name:"CreateWalletForm",form:t,requiredMark:!1,onFinish:({pin:o})=>i?.(o),onFinishFailed:n,autoComplete:"off",children:[r(Ie,{name:"pin",style:{marginBottom:16},children:r(Ur,{validateFields:t.validateFields,isPasswordLengthTipShow:!1})}),r(Ie,{className:"submit-btn-form-item",shouldUpdate:!0,children:()=>r(Q,{className:"submit-btn",type:"primary",htmlType:"submit",disabled:!t.isFieldsTouched(!0)||!!t.getFieldsError().filter(({errors:o})=>o.length).length,children:a("Confirm")})})]})]})})}function Mr(e){return v("div",{className:"scan-set-pin-wrapper",children:[r(X,{onBack:e?.onCancel}),r(De,{...e})]})}const oe=e=>{let i;return e?.type?i=e.type:typeof e=="string"?i=e:i=e?.message||e?.error?.message||"Something error",i},ge=e=>typeof e=="string"?e:e?.Error?.Message||e?.message?.Message||e?.message||e?.Error,M=(e,i,n)=>{i&&Fe.error(e.error),n?.(e)},Pr=(()=>{if(typeof navigator<"u"){const e=navigator.userAgent.toLowerCase();return/macintosh|mac os x/i.test(navigator.userAgent)?_.mac:e.indexOf("win")>=0||e.indexOf("wow")>=0?_.windows:_.other}else return _.other})();function Ze({chainId:e="AELF",backIcon:i,isErrorTip:n,privateKey:t,currentNetwork:a,onError:o,onBack:s,onFinish:p,onFinishFailed:c}){const[l,u]=N("Scan"),[d,f]=N(),m=Br({uri:a?.graphqlUrl,address:d?.address,chainId:e});console.log(m,"caWallet====");const y=A(()=>{try{let C;if(t){const E=ke(t);if(!be(E))throw"Invalid Private Key";C=Be(E)}else C=Se.wallet.createNewWallet();f(C)}catch(C){return console.error(C,"ScanBase==="),M({errorFields:"ScanBase",error:C},n,o)}},[n,o,t]);$(()=>{const C=setTimeout(()=>{y()},10);return()=>{C&&clearTimeout(C)}});const L=B(()=>{if(!d||!a)return"";const C={type:"login",address:d.address,netWorkType:a.networkType,chainType:a.walletType,deviceType:Pr};return JSON.stringify(C)},[a,d]);G(()=>{m&&u("SetPin")},[m]),console.log(L,d,"qrData===caWallet");const S=A(C=>{if(!d)throw Ce.noCreateWallet;if(!m)throw Ce.noCreateWallet;p?.({pin:C,walletInfo:d,caInfo:m})},[m,d,p]);return v("div",{className:"scan-base-wrapper",children:[l==="Scan"&&r(Tr,{backIcon:i,onBack:s,qrData:L}),l==="SetPin"&&r(Mr,{onFinish:S,onFinishFailed:c,onCancel:()=>u("Scan")})]})}const Rr={network:{networkList:Ae,defaultNetwork:Ae[0].networkType}};let Dr=class{constructor(i){this.getGlobalConfig=()=>this.config,this.getConfig=n=>this.config?.[n],this.setGlobalConfig=n=>{this.config={...this.config,...n}},this.setNetwork=n=>{this.config.network.defaultNetwork=n},this.config=i}};const Zr=new Dr(Rr);function Vr(){return v("div",{className:"sk-circle",children:[r("div",{className:"sk-circle-dot"}),r("div",{className:"sk-circle-dot"}),r("div",{className:"sk-circle-dot"}),r("div",{className:"sk-circle-dot"}),r("div",{className:"sk-circle-dot"}),r("div",{className:"sk-circle-dot"}),r("div",{className:"sk-circle-dot"}),r("div",{className:"sk-circle-dot"}),r("div",{className:"sk-circle-dot"}),r("div",{className:"sk-circle-dot"}),r("div",{className:"sk-circle-dot"}),r("div",{className:"sk-circle-dot"})]})}const se=new Cr,qr=()=>location.protocol==="chrome-extension:",ce="SET_GLOBAL_LOADING";function zr(){const[e,i]=N(),n=A(t=>i(t),[]);return G(()=>(se.addListener(ce,n),()=>{se.removeListener(ce,n)}),[n]),r(j,{children:!!e&&v("div",{className:"fix-max-content portkey-ui-loading-wrapper",style:typeof e!="number"?{}:{backgroundColor:`rgb(00 00 00 / ${e*100}%)`},children:[r(Vr,{}),r("div",{className:"loading-text",children:"Loading..."})]})})}var K={sandboxIdRequired:"The current platform is chrome extension, 'sandboxId' is  required",getContractError:"Failed to get contract",getChainError:"Unable to get chain information",missStorage:"Please configure Storage"};class Kr{async getItem(i){if(typeof localStorage<"u")return localStorage.getItem(i);throw Error(K.missStorage)}async setItem(i,n){if(typeof localStorage<"u")return localStorage.setItem(i,n);throw Error(K.missStorage)}async removeItem(i){if(typeof localStorage<"u")return localStorage.removeItem(i);throw Error(K.missStorage)}}const Gr=new Kr;let O=new Ue(Gr);const Jr=e=>(O=new Ue(e),O);function jr({children:e}){const i=B(()=>J.getGlobalConfig(),[]);return $(()=>{i.storage&&Jr(i.storage)}),r(j,{children:r(ur,{locale:i?.locale,children:v("div",{className:"portkey-ui-wrapper",children:[r(zr,{}),e]})})})}const J=Zr,z=jr;function en(e){return r(z,{children:r(Ze,{...e})})}function Ve(e){const{leftCallBack:i,width:n,title:t,leftElement:a,transitionName:o}=e;return r(xe,{maskClosable:!1,centered:e.centered??!0,destroyOnClose:!0,footer:null,maskStyle:{backgroundColor:"rgba(0, 0, 0, 0.3)"},...e,width:n||"400px",className:x("portkey-ui-common-modals",e.className),transitionName:o,title:v(Te,{justify:"space-between",children:[i||a?r(H,{className:"common-modal-left-icon",flex:1,onClick:i,children:a||r(Ar,{})}):null,r(H,{flex:2,style:{textAlign:"center"},children:t}),i||a?r(H,{flex:1}):null]})})}const Hr="data:image/png;base64,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";function qe({fallback:e,rootClassName:i,...n}){return r(hr,{rootClassName:x("base-verifier-icon",i),width:40,height:40,preview:!1,fallback:e??Hr,...n})}function ze({items:e,className:i,...n}){const t=B(()=>e?.map(a=>({value:a.value,disabled:a.disabled,label:v("div",{className:"flex-row-center label-item",children:[r("div",{className:"label-icon",children:a.icon}),r("div",{className:"title",children:a.label})]})})),[e]);return r(fr,{className:x("portkey-ui-common-select",i),showArrow:!1,getPopupContainer:a=>a.parentElement,style:{width:"100%"},options:t,...n})}const F=e=>se.emit(ce,e);function Ke({className:e,serviceUrl:i,isErrorTip:n,verifierList:t,guardianAccount:a,loginType:o=V.email,defaultVerifier:s,onError:p,onConfirm:c}){const[l,u]=N(),{t:d}=q(),f=B(()=>t?.map(g=>({value:g.id,iconUrl:g.imageUrl??"",label:g.name,url:g.endPoints[0],icon:r("img",{src:g.imageUrl}),id:g.id})),[t]),m=B(()=>s||f?.[0]?.value,[s,f]),y=A(g=>{S(g)},[]),[L,S]=N(m);de(()=>{S(g=>(console.log(g),g||m))},[m]);const C=B(()=>t?.find(g=>g.id===L),[L,t]),E=A(async()=>{try{if(!C)return M({errorFields:"VerifierSelect",error:"Can not get verification"},n,p);F(!0);const g=await O.sendVerificationCode({baseURL:i,params:{guardianAccount:a,type:Z[o],verifierId:C.id,chainId:ie}});F(!1),u(!1),g.verifierSessionId&&c?.({verifier:C,...g})}catch(g){F(!1),console.log(g,"verifyHandler==error");const h=oe(g);M({errorFields:"VerifierSelect",error:h},n,p)}},[a,n,o,c,p,C,i]);return v("div",{className:x("portkey-ui-select-verifier-wrapper",e),children:[v("div",{className:"select-verifier-content",id:"select-verifier-content",children:[v("div",{className:"select-verifier-inner",children:[r("div",{className:"select-verifier-title",children:d("Select verifier")}),r("p",{className:"select-verifier-description",children:d("The recovery of decentralized accounts requires approval from your verifiers")}),r(ze,{className:"verifier-select",value:L,onChange:y,items:f}),r("p",{className:"popular-title",children:d("Popular")}),r("ul",{className:"popular-content",children:f?.slice(0,3)?.map(g=>v("li",{className:"popular-item",onClick:()=>y(g.value),children:[r(qe,{src:g.iconUrl,rootClassName:"popular-item-image"}),r("p",{className:"popular-item-name",children:g.label})]},g.value))})]}),r(Q,{className:"confirm-btn",type:"primary",onClick:()=>{if(!a)return M({errorFields:"VerifierSelect",error:"Missing parameter guardianAccount"},n,p);u(!0)},children:d("Confirm")})]}),v(Ve,{getContainer:"#select-verifier-content",className:"verify-confirm-modal",closable:!1,open:l,width:320,onCancel:()=>u(!1),children:[r("p",{className:"modal-content",children:`${C?.name??""} will send a verification code to ${a} to verify your email address.`}),v("div",{className:"btn-wrapper",children:[r(Q,{onClick:()=>u(!1),children:d("Cancel")}),r(Q,{type:"primary",onClick:E,children:d("Confirm")})]})]})]})}function rn(e){return r(z,{children:r(Ke,{...e})})}function Yr(){return A(async({baseURL:e,sessionId:i,verificationType:n})=>{const t=await Er({baseURL:e,verificationType:n,managerUniqueId:i});if(console.log(t,"walletResult==="),t.status!=="pass")throw t?.message||t.status||"Something error";return t},[])}function Ge({serviceUrl:e,chainId:i="AELF",className:n,loginType:t=V.email,privateKey:a,walletName:o="walletName",guardianAccount:s,verificationType:p,guardianApprovedList:c,isErrorTip:l,onError:u,onFinish:d,onAddManager:f}){const[m,y]=N(),L=Yr(),S=A(()=>{try{let h;if(a){const I=ke(a);if(!be(I))throw"Invalid Private Key";h=Be(I)}else h=Se.wallet.createNewWallet();y(h)}catch(h){return console.error(h),M({errorFields:"SetPinAndAddManager",error:h},l,u)}},[l,u,a]);$(()=>{S()});const C=A(async({managerAddress:h})=>{if(!s||!Z[t])throw"Missing account!!! Please login/register again";if(!c?.length)throw"Missing guardianApproved";const I=ve(),w=c[0],b=await Lr({baseUrl:e,type:Z[t],loginGuardianAccount:s,managerAddress:h,deviceString:Date.now().toString(),chainId:i,verifierId:w.verifierId,verificationDoc:w.verificationDoc,signature:w.signature,context:{clientId:h,requestId:I}});return{requestId:I,sessionId:b.sessionId}},[i,s,c,t,e]),E=A(async({managerAddress:h})=>{if(!s||!Z[t])throw"Missing account!!! Please login/register again";const I=ve(),w=await wr({baseURL:e,loginGuardianAccount:s,managerAddress:h,deviceString:Date.now().toString(),chainId:i,guardiansApproved:c,context:{clientId:h,requestId:I}});return{requestId:I,sessionId:w.sessionId}},[s,t,e,i,c]),g=A(async h=>{try{const{pin:I}=h;if(!s)throw"Missing account!!!";if(!m?.address)throw"No walletInfo";const w=gr(m,I,o);if(!w)throw"Create managerInfo error";const{walletInfo:b}=w;F(!0);let k={requestId:b.address,sessionId:""};if(p===Y.register)k=await C({managerAddress:b.address});else if(p===Y.communityRecovery)k=await E({managerAddress:b.address});else throw"VerificationType error";const P={managerUniqueId:k.sessionId,clientId:b.address,requestId:k.requestId,loginAccount:s,type:t,verificationType:p};f?.({managerInfo:P,pin:I,walletInfo:b});const U=await L({baseURL:e,verificationType:p,sessionId:k.sessionId,managerAddress:b.address});d?.({caInfo:{managerInfo:P,[i]:{caAddress:U.caAddress,caHash:U.caHash}},pin:I,walletInfo:b})}catch(I){F(!1),console.log(I,"onCreate==error");let w;const b=lr(I);return b?w=b:I?.message||I?.error?.message?w=I?.message||I?.error?.message:w=typeof I=="string"?I:"Something error",M({errorFields:"SetPinAndAddManager",error:w},l,u)}F(!1)},[s,m,o,p,t,f,L,e,d,i,C,E,l,u]);return r(De,{className:x("portkey-card-height",n),onFinish:g,onFinishFailed:h=>M({errorFields:"SetPinAndAddManager",error:`Form Error: ${h.errorFields[0].name}`},l,u)})}function nn(e){return r(z,{children:r(Ge,{...e})})}function Or({...e}){return r(mr,{getPopupContainer:i=>i,overlayClassName:x("common-tooltip",e.overlayClassName),...e,children:e.children?e.children:r(R,{type:"Tooltip"})})}function Je({guardianType:e=V.email,size:i=32,verifierSrc:n,wrapperClassName:t}){return v("div",{className:x("flex-row-center icon-pair",t),children:[r(R,{type:e===V.phone?"phone":"Email",style:{width:i,height:i,fontSize:i}}),r(qe,{width:i,height:i,src:n})]})}function Wr({disabled:e,item:i,isExpired:n,serviceUrl:t,isErrorTip:a,onError:o,onSend:s,onVerifying:p}){const{t:c}=q(),l=A(async d=>{try{F(!0);const f=await O.sendVerificationCode({baseURL:t,params:{guardianAccount:d.guardianAccount,type:Z[d.guardianType],verifierId:d.verifier?.id||"",chainId:ie}});F(!1),f.verifierSessionId&&s?.({...d,verifierInfo:{sessionId:f.verifierSessionId,endPoint:f.endPoint}})}catch(f){return console.error(f,"SendCode error:"),F(!1),M({errorFields:"GuardianItems",error:f?.error?.message??f??"Something error"},a,o)}},[t,s,a,o]),u=A(async d=>{p?.(d)},[p]);return v("li",{className:x("flex-between-center verifier-item",e&&"verifier-item-disabled"),children:[i.isLoginAccount&&r("div",{className:"login-icon",children:c("Login Account")}),v("div",{className:"flex-between-center",children:[r(Je,{guardianType:i.guardianType,verifierSrc:i.verifier?.imageUrl}),r("span",{className:"account-text",children:i.guardianAccount})]}),n&&i.status!==D.Verified?r(Q,{className:"expired",type:"text",disabled:!0,children:c("Expired")}):v(j,{children:[(!i.status||i.status===D.NotVerified)&&r(Q,{className:"not-verified",type:"primary",onClick:()=>l(i),children:c("Send")}),i.status===D.Verifying&&r(Q,{type:"primary",className:"verifying",onClick:()=>u(i),children:c("Verify")}),i.status===D.Verified&&r(Q,{className:"verified",type:"text",disabled:!0,children:c("Confirmed")})]})]})}var $r=W(Wr);function je({className:e,serviceUrl:i,guardianList:n=[],expiredTime:t,isErrorTip:a,onError:o,onConfirm:s,onSend:p,onVerifying:c}){const{t:l}=q(),[u,d]=N(!1),f=B(()=>Ir(n.length),[n.length]),m=B(()=>n.filter(y=>y?.status===D.Verified).length,[n]);return G(()=>{if(!t)return d(!1);if((t??0)-Date.now()<=0)return d(!0);const y=setInterval(()=>{if((t??0)-Date.now()<=0)return d(!0);d(!1)},1e3);return()=>{clearInterval(y)}},[t]),r("div",{className:x("guardian-list-wrapper",e),children:v("div",{className:"guardian-list-content",children:[r("div",{className:"guardian-list-title",children:l("Guardian Approval")}),r("p",{className:"guardian-list-description",children:l(u?"Expired":"Expire after 1 hour")}),v("div",{className:"flex-between-center approve-count",children:[v("span",{className:"flex-row-center",children:[l("Guardians' approval"),r(Or,{placement:"top",title:l("guardianApprovalTip")})]}),v("div",{children:[r("span",{className:"already-approval",children:m}),r("span",{className:"all-approval",children:`/${f}`})]})]}),v("ul",{className:"verifier-content",children:[n?.map((y,L)=>r($r,{serviceUrl:i,disabled:m>=f&&y.status!==D.Verified,isExpired:u,item:y,isErrorTip:a,onError:o,onSend:S=>p?.(S,L),onVerifying:S=>c?.(S,L)},y.key)),!u&&r("div",{className:"btn-wrap",children:r(Q,{type:"primary",className:"recovery-wallet-btn",disabled:m<=0||m!==f,onClick:s,children:l("Recover Wallet")})})]})]})})}function tn(e){return r(z,{children:r(je,{...e})})}const He=tr(({error:e,val:i,wrapperClassName:n,onChange:t,inputValidator:a},o)=>{const{t:s}=q(),p=A(async c=>{const l=Nr(c);if(l)throw l;await a?.(c)},[a]);return ar(o,()=>({validateEmail:p})),v("div",{className:x("email-input-wrapper",n),children:[r("div",{className:"input-label",children:"Email"}),v("div",{className:"input-wrapper",children:[r(Qe,{className:"login-input",value:i,placeholder:s("Enter email"),onChange:c=>{t?.(c.target.value)}}),e&&r("span",{className:"error-text",children:e})]})]})});function Xr({inputValidator:e,onSuccess:i}){const[n,t]=N(),[a,o]=N(),s=le(),{t:p}=q(),c=A(async()=>{try{await s?.current?.validateEmail(a),a&&i?.(a)}catch(l){t(l)}},[i,a]);return v("div",{className:"email-sign-wrapper",children:[r(He,{val:a,ref:s,error:n,inputValidator:e,onChange:l=>{t(void 0),o(l)}}),r(Q,{className:"primary-btn",type:"primary",disabled:!a||!!n,onClick:c,children:p("Sign Up")})]})}function Ye({onBack:e,inputValidator:i,onSignUp:n}){const{t}=q(),a=A(async o=>i?.(o),[i]);return v("div",{className:"sign-ui-card",children:[v("h2",{className:"sign-title",children:[r(R,{type:"BackLeft",onClick:e}),r("span",{children:t("Sign Up")})]}),r("div",{className:"sign-content",children:r(Xr,{inputValidator:a,onSuccess:n})})]})}function an(e){return r(z,{children:r(Ye,{...e})})}function _r({onLogin:e,inputValidator:i}){const[n,t]=N(),[a,o]=N(""),s=le(),p=A(async()=>{try{if(console.log(a,"val===checkError"),F(!0),console.log("setLoading","val===checkError111"),await s?.current?.validateEmail(a),!a)throw"No Account";F(!1),e?.(a)}catch(l){F(!1),console.error(l,"error====onLogin"),typeof l=="string"?t(l):Fe.error(l)}},[e,a]),c=A(async l=>i?.(l),[i]);return v("div",{className:"email-login-wrapper",children:[r(He,{val:a,ref:s,error:n,inputValidator:c,onChange:l=>{t(void 0),o(l)}}),r(Q,{className:"login-primary-btn",type:"primary",disabled:!a||!!n,onClick:p,children:"Login"})]})}function ei({network:e,networkList:i,inputValidator:n,onLogin:t,onStep:a,onNetworkChange:o}){const s=B(()=>J.config?.network,[]),p=B(()=>i||s?.networkList,[s,i]),c=B(()=>e||s?.defaultNetwork||p?.[0]?.networkType,[p,e]),[l,u]=N(c),d=B(()=>p?.map(m=>({value:m.networkType,icon:m?.networkIconUrl?r("img",{src:m?.networkIconUrl}):r(R,{type:"Aelf"}),label:m.name,disabled:!m.isActive})),[p]),f=A(m=>{u(m),o?.(m)},[o]);return v("div",{className:"flex-column login-ui-card",children:[v("div",{className:"login-content",children:[v("h2",{className:"login-title",children:["Login",r(R,{type:"QRCode",onClick:()=>a?.("LoginByScan")})]}),r(_r,{inputValidator:n,onLogin:t}),r(Q,{className:"sign-btn",onClick:()=>a?.("SignUp"),children:"Sign up"})]}),r("div",{className:"network-list-wrapper",children:r(ze,{className:"network-list-select",placement:"topLeft",value:l,items:d,onChange:f,style:{width:366},showArrow:!1,getPopupContainer:m=>m.parentElement})})]})}class ri{constructor(){this.addViewContract=async({rpcUrl:i,address:n})=>{const t=await Le(i,n);return this.viewContract[i]={[n]:t},t},this.addSendContract=async({rpcUrl:i,address:n,privateKey:t})=>{const a=await Le(i,n,t);return this.sendContract[i]={[n]:a},a},this.getSendContract=async({rpcUrl:i,address:n,privateKey:t})=>this.viewContract?.[i]?.[n]||await this.addSendContract({rpcUrl:i,address:n,privateKey:t}),this.getViewContract=async({rpcUrl:i,address:n})=>{let t=this.viewContract?.[i]?.[n];return t||(t=await this.addViewContract({rpcUrl:i,address:n}),t)},this.viewContract={},this.sendContract={}}}const Oe=new ri,ii=async({sandboxId:e,rpcUrl:i,chainType:n,address:t,paramsOption:a})=>{const o=await Me.dispatchAndReceive(Pe.callViewMethod,{rpcUrl:i,chainType:n,address:t,methodName:"GetHolderInfo",paramsOption:a},e);if(console.log(o,"resMessage===GetHolderInfo"),o.code===Re.error)throw o.message;return o.message},ni=async e=>{const i=await Oe.getViewContract({rpcUrl:e.rpcUrl,address:e.address});if(!i)throw K.getContractError;return i.callViewMethod("GetHolderInfo")},We=async e=>{const i=dr(),{sandboxId:n}=e;if(i){if(!n)throw K.sandboxIdRequired;return ii(e)}return ni(e)};function $e({type:e,sandboxId:i,className:n,chainInfo:t,privateKey:a,networkList:o,defaultNetwork:s,isErrorTip:p,onError:c,onSuccess:l,onFinish:u,inputValidator:d,onSignTypeChange:f,onNetworkChange:m}){const[y,L]=N(e??"Login"),S=B(()=>o||J.config?.network?.networkList,[o]),C=B(()=>s||J.config?.network?.defaultNetwork||S?.[0]?.networkType,[S,s]),[E,g]=N(C),h=A(k=>L(k),[]),I=A(k=>{g(k),m?.(k)},[m]),w=B(()=>S?.find(k=>k.networkType===E),[S,E]);de(()=>{f?.(y)},[y,f]);const b=A(async k=>{if(!t)throw K.getContractError;let P=!1;try{const U=await We({sandboxId:i,rpcUrl:t.endPoint,address:t.contractAddress,chainType:w?.walletType||"aelf",paramsOption:{loginGuardianAccount:k}});console.log(U,"checkResult===GetHolderInfo"),U.guardiansInfo?.guardianAccounts?.length>0&&(P=!0)}catch(U){if(console.log(U,"validateEmail==="),U?.Error?.Details&&U?.Error?.Details?.indexOf("Not found"))P=!1;else if(U?.Error?.Message==="Invalid signature")P=!1;else throw ge(U)}if(y==="SignUp"){if(P)throw ye.alreadyRegistered}else if(!P)throw ye.noAccount;return d?.(k)},[y,t,w?.walletType,d,i]);return v("div",{className:x("portkey-card-height signup-login-content",n),children:[y==="SignUp"&&r(Ye,{inputValidator:b,onBack:()=>L("Login"),onSignUp:l}),y==="LoginByScan"&&r(Ze,{chainId:t?.chainId,privateKey:a,backIcon:r(R,{type:"PC"}),currentNetwork:w,onBack:()=>L("Login"),onFinish:u,isErrorTip:p,onError:c}),y==="Login"&&r(j,{children:r(ei,{network:E,inputValidator:b,onStep:h,onLogin:l,onNetworkChange:I})})]})}function on(e){return r(z,{children:r($e,{...e})})}const ae=60;function pe({verifier:e,className:i,serviceUrl:n,isErrorTip:t,isCountdownNow:a,isLoginAccount:o,guardianAccount:s,loginType:p=V.email,verifierSessionId:c,onError:l,onSuccess:u}){const[d,f]=N(0),[m,y]=N(),L=le(),{t:S}=q();$(()=>{a&&f(ae)});const C=A(async g=>{try{if(console.log(g),g&&g.length===6){if(!c)throw"Missing verifierSessionId!!!";F(!0);const h=await kr({baseUrl:n,guardianAccount:s,verifierSessionId:c,verificationCode:g,verifierId:e.id,chainId:ie});if(F(!1),h.signature)return u?.({...h,verifierId:e?.id||""});h?.error?.message?M({errorFields:"CodeVerify",error:h.error.message},t,l):M({errorFields:"CodeVerify",error:"Invalid code"},t,l),y("")}}catch(h){F(!1),y("");const I=oe(h);M({errorFields:"CodeVerify",error:I},t,l)}},[c,n,s,e.id,u,t,l]),E=A(async()=>{try{if(!s)throw"Missing loginGuardianType";if(!Z[p])throw"Missing guardiansType";F(!0);const g=await O.sendVerificationCode({baseURL:n,params:{guardianAccount:s,type:Z[p],verifierId:e.id,chainId:ie}});F(!1),g.verifierSessionId&&f(ae)}catch(g){F(!1),console.log(g,"verifyHandler");const h=oe(g);M({errorFields:"CodeVerify",error:h},t,l)}},[s,t,p,l,n,e.id]);return G(()=>{d===ae&&(L.current&&clearInterval(L.current),L.current=setInterval(()=>{f(g=>{const h=g-1;return h<=0?(L.current&&clearInterval(L.current),L.current=void 0,0):h})},1e3))},[d]),v("div",{className:x("verifier-account-wrapper",i),children:[o&&r("div",{className:"login-icon",children:S("Login Account")}),v("div",{className:"flex-row-center login-account-wrapper",children:[r(Je,{guardianType:p,verifierSrc:e.imageUrl}),r("span",{className:"login-account",children:s||""})]}),v("div",{className:"send-tip",children:[`A ${te.length}-digit code was sent to`,r("span",{className:"account",children:s}),r("br",{}),`Enter it within ${te.expiration} minutes`]}),v("div",{className:"password-wrapper",children:[r(Sr,{value:m,length:te.length,seperated:!0,plain:!0,onChange:g=>y(g),onFill:C}),r(Q,{type:"text",disabled:!!d,onClick:E,className:x("text-center resend-btn",d&&"resend-after-btn"),children:d?`Resend after ${d}s`:S("Resend")})]})]})}function sn(e){return r(z,{children:r(pe,{...e})})}function ti({onBack:e,...i}){return v("div",{className:"verifier-page-wrapper",children:[r(X,{onBack:e}),r(pe,{...i})]})}function Xe({header:e,loginType:i=V.email,className:n,serviceUrl:t,guardianList:a=[],isErrorTip:o,onError:s,onConfirm:p}){const[c,l]=N(),[u,d]=N(a),[f,m]=N();de(()=>{!u.length&&a?.length&&d(a)},[a,u]),console.log(u,"_guardianList===");const y=A(async(E,g)=>{try{f||m(Date.now()),l(g),d(h=>(h[g]={...E,status:D.Verifying,isInitStatus:!0},h))}catch(h){return console.log(h,"error==="),M({errorFields:"GuardianApproval",error:h?.error?.message??h?.type??"Something error"},o,s)}},[f,o,s]),L=A(async(E,g)=>{try{l(g),d(h=>(h[g].isInitStatus=!1,h))}catch(h){return console.log(h,"error==="),M({errorFields:"GuardianApproval",error:h?.error?.message??h?.type??"Something error"},o,s)}},[o,s]),S=A((E,g)=>{d(h=>(h[g]={...h[g],status:D.Verified,verificationDoc:E.verificationDoc,signature:E.signature},h)),l(void 0)},[]),C=A(()=>{const E=u.map(g=>({type:Z[g.guardianType],value:g.guardianAccount,verifierId:g.verifier?.id||"",verificationDoc:g.verificationDoc||"",signature:g.signature||""}));p?.(E)},[u,p]);return r("div",{className:x("ui-guardian-approval-wrapper",n),children:typeof c=="number"?r(ti,{onBack:()=>l(void 0),serviceUrl:t,guardianAccount:u[c].guardianAccount||"",verifierSessionId:u[c].verifierInfo?.sessionId||"",isLoginAccount:u[c].isLoginAccount,isCountdownNow:u[c].isInitStatus,loginType:i,isErrorTip:o,verifier:u[c].verifier,onSuccess:E=>S(E,c),onError:s}):v(j,{children:[e,r(je,{expiredTime:f,serviceUrl:t,guardianList:u,isErrorTip:o,onSend:y,onVerifying:L,onConfirm:C,onError:s})]})})}function cn(e){return r(z,{children:r(Xe,{...e})})}function ai(e){const{transitionName:i}=e;return r(xe,{closable:!1,centered:!0,destroyOnClose:!0,title:null,footer:null,maskStyle:{backgroundColor:"rgba(0, 0, 0, 0.3)"},...e,width:430,className:x("portkey-ui-base-modal",e.className),transitionName:i})}function oi({onSignInFinished:e,...i}){const[n,t]=N("Login"),a=A(s=>{e?.({isFinished:!1,result:{type:n,value:s}})},[n,e]),o=A(s=>{e?.({isFinished:!0,result:{value:s}})},[e]);return v(j,{children:[r($e,{...i,onSignTypeChange:s=>t(s),onSuccess:a,onFinish:o}),r(Q,{onClick:()=>e?.({isFinished:!1,result:{type:"SignUp",value:"111.com"}}),children:"test btn SignUp"}),r(Q,{onClick:()=>e?.({isFinished:!1,result:{type:"Login",value:"111.com"}}),children:"test btn Login"})]})}var si=W(oi);function ci({loginType:e,serviceUrl:i,isErrorTip:n,verifierList:t,guardianAccount:a,onFinish:o,onCancel:s,onError:p}){const[c,l]=N("verifierSelect"),[u,d]=N(),f=A(L=>{d(L),l("verifyAccount")},[]),m=A(L=>{if(!u?.verifier)throw"No verifier Info";o?.({verifier:u.verifier,...L})},[o,u]),y=A(()=>{c==="verifyAccount"?l("verifierSelect"):s?.()},[s,c]);return v("div",{className:"step-page-wrapper",children:[r(X,{onBack:y}),c==="verifierSelect"&&r(Ke,{className:"content-padding",guardianAccount:a,serviceUrl:i,verifierList:t,isErrorTip:n,onError:p,onConfirm:f}),c==="verifyAccount"&&u?r(pe,{className:"content-padding",guardianAccount:a,serviceUrl:i,verifier:u.verifier,loginType:e,isCountdownNow:!0,isLoginAccount:!0,verifierSessionId:u.verifierSessionId,isErrorTip:n,onError:p,onSuccess:m}):c==="verifyAccount"&&"Missing sendCodeInfo",r(Q,{onClick:()=>o?.({verifier:{id:"string",name:"string",imageUrl:"string",endPoints:[""],verifierAddresses:[""]},verificationDoc:"string",signature:"string"}),children:"test btn"})]})}var li=W(ci);function di({sandboxId:e,loginType:i,serviceUrl:n,chainInfo:t,chainType:a,isErrorTip:o,verifierList:s,approvedList:p,guardianAccount:c,onFinish:l,onCancel:u,onError:d}){const[f,m]=N(),y=A(async()=>{try{if(!t)return;const S={};s?.forEach(w=>{S[w.id]=w});const C=await We({sandboxId:e,rpcUrl:t.endPoint,address:t.contractAddress,chainType:a||"aelf",paramsOption:{loginGuardianAccount:c}}),{loginGuardianAccountIndexes:E,guardianAccounts:g}=C?.guardiansInfo,h=[...g];E.forEach(w=>{h[w].isLoginAccount=!0});const I=h.map(w=>{const b=w.value,k=S?.[w.guardian.verifier.id],P=typeof w.guardian.type=="string"?yr[w.guardian.type]:w.guardian.type;return{key:`${b}&${k?.id}`,isLoginAccount:w.isLoginAccount,verifier:k,guardianAccount:b,guardianType:P}});m(I)}catch(S){console.log(S,"error===GuardianApproval"),M({errorFields:"GuardianApproval",error:ge(S)},o,d)}},[t,a,c,o,d,e,s]);G(()=>{y()},[y]);const L=B(()=>{if(!p)return f;const S={};return p.forEach(C=>{S[`${C.value}&${C.verifierId}`]=C}),f?.map(C=>{const E=S[`${C.guardianAccount}&${C.verifier?.id}`];return E?{...C,status:D.Verified,verificationDoc:E.verificationDoc,signature:E.signature}:C})},[p,f]);return console.log(f,L,"guardianList==="),v("div",{className:"step-page-wrapper step2-sign-in-wrapper",children:[r(Xe,{header:r(X,{onBack:u}),loginType:i,serviceUrl:n,guardianList:L,isErrorTip:o,onConfirm:l,onError:d}),r(Q,{onClick:()=>l?.([{type:"Email",value:"string",verifierId:"string",verificationDoc:"string",signature:"string"}]),children:"test btn"})]})}var gi=W(di);function pi({serviceUrl:e,chainId:i,loginType:n,guardianAccount:t,verificationType:a,guardianApprovedList:o=[],onFinish:s,onCancel:p}){const[c,l]=N(!1),u=A(()=>{a===Y.register?l(!0):p?.()},[p,a]);return v("div",{className:"step-page-wrapper",children:[r(X,{onBack:u}),r(Ge,{className:"content-padding",serviceUrl:e,chainId:i,loginType:n,guardianAccount:t,verificationType:a,guardianApprovedList:o,onFinish:s}),v(Ve,{closable:!1,open:c,className:"confirm-return-modal",title:"Leave this page?",width:320,getContainer:"#set-pin-wrapper",children:[r("p",{className:"modal-content",children:"Are you sure you want to leave this page? All changes will not be saved."}),v("div",{className:"btn-wrapper",children:[r(Q,{onClick:()=>l(!1),children:"No"}),r(Q,{type:"primary",onClick:p,children:"Yes"})]})]})]})}var ui=W(pi);const hi=({baseUrl:e,chainInfo:i,chainId:n="AELF"},t)=>{const[a,o]=N(i),s=A(async({baseUrl:p})=>{try{if(i)return;const c=await br.es.getChainsInfo({baseURL:p});if(c&&c?.items?.length){const l=c.items.find(u=>u.chainId===n);o({...l,contractAddress:l.caContractAddress})}}catch(c){return c?.type?t?.({errorFields:"getChainList",error:c.type}):c?.error?.message?t?.({errorFields:"getChainList",error:c.error.message}):t?.({errorFields:"getChainList",error:c})}},[n,i,t]);return G(()=>{s({baseUrl:e})},[e,s]),console.log(i,"_chainInfo===22213"),a},fi=async({sandboxId:e,rpcUrl:i,chainType:n,address:t})=>{const a=await Me.dispatchAndReceive(Pe.callViewMethod,{rpcUrl:i,chainType:n,address:t,methodName:"GetVerifierServers"},e);if(a.code===Re.error)throw ge(a.message);return a.message?.verifierServers},mi=async e=>{const i=await Oe.getViewContract({rpcUrl:e.rpcUrl,address:e.address});if(!i)throw K.getContractError;return i.callViewMethod("GetVerifierServers")},vi=e=>{const i=qr(),{sandboxId:n}=e;if(i){if(!n)throw K.sandboxIdRequired;return fi(e)}return mi(e)},Ci={network:"TESTNET",loginType:V.email};class Ai{constructor(i=Ci){this.getState=n=>this.state?.[n],this.setState=(n,t)=>{this.state={...this.state,[n]:t}},this.state=i}}const Ne=new Ai;function ln({chainId:e="AELF",chainInfo:i,loginType:n=V.email,isErrorTip:t=!0,sandboxId:a,inputValidator:o,open:s,className:p,getContainer:c,onNetworkChange:l,onCancel:u,onFinish:d,onError:f}){const[m,y]=N("SignIn"),[L,S]=N(),C=B(()=>J.config?.network?.networkList,[]),E=B(()=>J.config?.network?.defaultNetwork||C?.[0]?.networkType,[C]),[g,h]=N(E),I=B(()=>C?.find(T=>T.networkType===g),[g,C]),w=hi({baseUrl:I?.apiUrl,chainInfo:i,chainId:e},f),b=B(()=>I?.apiUrl||"",[I?.apiUrl]),k=or(m),[P,U]=N(),_e=A(T=>{const{type:ne,value:me}=T.result;T.isFinished?d?.(me):(y(ne==="SignUp"?"Step2WithSignUp":"Step2WithSignIn"),S(me))},[d]),er=A(T=>{if(!L)return console.error("No guardianAccount!");const ne=[{type:Z[n],value:L,verifierId:T.verifier.id,verificationDoc:T.verificationDoc,signature:T.signature}];U(ne),y("Step3")},[L,n]),ue=A(()=>{y("SignIn"),U(void 0)},[]),rr=A(()=>{k==="Step2WithSignUp"?(y("Step2WithSignUp"),U(void 0)):k==="Step2WithSignIn"&&y("Step2WithSignIn")},[k]);$(()=>{E&&Ne.setState("network",E)});const ir=A(T=>{J.setGlobalConfig({network:{defaultNetwork:T}}),h(T),Ne.setState("network",T),l?.(T)},[l]);console.log(w,"_chainInfo===");const[he,nr]=N(),fe=A(async()=>{try{if(!w)return;const T=await vi({sandboxId:a,rpcUrl:w.endPoint,chainType:I?.walletType??"aelf",address:w.contractAddress});nr(T)}catch(T){f?.({errorFields:"VerifierList",error:T})}},[w,I?.walletType,f,a]);return G(()=>{fe()},[fe]),r(z,{children:v(ai,{className:p,open:s,getContainer:c,onCancel:u,children:[m==="SignIn"&&r(si,{sandboxId:a,chainInfo:w,defaultNetwork:E,networkList:C,isErrorTip:t,onError:f,inputValidator:o,onSignInFinished:_e,onNetworkChange:ir}),m==="Step2WithSignUp"&&r(li,{loginType:n,guardianAccount:L||"",serviceUrl:b,verifierList:he,isErrorTip:t,onError:f,onFinish:er,onCancel:ue}),m==="Step2WithSignIn"&&r(gi,{sandboxId:a,approvedList:P,loginType:n,serviceUrl:b,chainInfo:w,verifierList:he,chainType:I?.walletType,guardianAccount:L||"",isErrorTip:t,onError:f,onFinish:T=>{U(T),y("Step3")},onCancel:ue}),m==="Step3"&&r(ui,{serviceUrl:b,chainId:w?.chainId,loginType:n,guardianAccount:L||"",verificationType:k==="Step2WithSignUp"?Y.register:Y.communityRecovery,guardianApprovedList:P||[],onFinish:d,onCancel:rr})]})})}export{sn as CodeVerify,J as ConfigProvider,R as CustomSvg,cn as GuardianApproval,tn as GuardianList,en as ScanCard,nn as SetPinAndAddManager,ln as SignIn,on as SignUpAndLogin,an as SignUpBase,rn as VerifierSelect};
//# sourceMappingURL=index.js.map
